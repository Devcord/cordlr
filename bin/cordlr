#!/usr/bin/env node
const Version = require('./methods/version')
const Start = require('./methods/start')

/**
 * Create bot using command line.
 **/

// CLI Data
require('yargs') // eslint-disable-line
  .usage('$0 [command, [options, [values]]]')
  .command({
    command: 'start',
    aliases: ['s'],
    desc: 'Start the bot',
    builder: (yargs) => {
      yargs.options({
        'prefix': {
          alias: 'x',
          describe: 'Prefix to trigger commands',
          type: 'string'
        },
        'token': {
          alias: 't',
          describe: 'Discord API Token',
          type: 'string'
        },
        'plugins': {
          alias: 'p',
          describe: 'Array of plugins to load',
          type: 'array'
        }
      })
    },
    handler: (argv) => {
      if (argv) return new Start({token: argv.token, prefix: argv.prefix})
    }
  })
  .command({
    command: 'version',
    desc: 'Show package version',
    handler: (argv) => {
      if (argv) return new Version()
    }
  })
  .example('$0 start -t <token> -p <plugins> -x <prefix>')
  .example('$0 version')
  .help('help')
  .argv

